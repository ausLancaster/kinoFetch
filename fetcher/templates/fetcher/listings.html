{% extends 'fetcher/base.html' %}

{% block listings %}
    <p>WEEKLY FILM LISTINGS</p>
    <p id="dateRange"></p>

<script>
    function date_range_to_string() {
        let today = new Date();
        today.setHours(0, 0, 0, 0);
        let daysToThursday = (today.getDay() - 4 + 7) % 7;
        let nearestThursday = new Date(today);
        nearestThursday.setDate(nearestThursday.getDate() - daysToThursday);
        let startingDate = nearestThursday;
        let endDate = new Date(nearestThursday);
        endDate.setDate(nearestThursday.getDate() + 6);
        return `${startingDate.toLocaleDateString('en-US', {
            month: 'long',
            day: 'numeric'
        })} - ${endDate.toLocaleDateString('en-US', {month: 'long', day: 'numeric'})}`
    }

    document.getElementById('dateRange').innerText = date_range_to_string();
</script>

{% endblock %}